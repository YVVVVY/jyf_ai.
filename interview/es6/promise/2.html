<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>手写promise</title>
</head>
<body>
<script>
    // promise 状态有三个 pending fulfilled rejected
    // 状态只能从 pending 到 fulfilled 或者 rejected 不能逆向转换
    // 状态一旦转换，就不会再改变


    promise.MyALl=function(promises){
        let arr = []
        let count = 0


        return new Promise((resolve,reject)=>{
            // resolve -> all promises 所有都resolve 才能调用
            // 如果promise[i]不是promise怎么办 Promise.ressolve
            promises.forEach((item,i) => {
                // 里面变promise
                Promise.resolve(item).then(res=>{
                    arr[i] = res 
                    count += 1
                    if(count === promises.length){
                        resolve(arr)
                    }
                }).catch(reject)
            })
    })
}
</script>
</body>
</html>